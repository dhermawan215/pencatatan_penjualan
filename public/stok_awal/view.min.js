var Index=function(){const csrf_token=$('meta[name="_token"]').attr("content");var table,handleDataStok=function(){table=$("#tableStokBarang").DataTable({responsive:!1,autoWidth:!1,pageLength:5,searching:!0,paging:!0,lengthMenu:[[5,10,25,50,100],[5,10,25,50,100]],language:{info:"Menampilkan _START_ - _END_ dari _TOTAL_ data",infoEmpty:"Menampilkan 0 - 0 dari 0 data",infoFiltered:"",zeroRecords:"Data tidak di temukan",loadingRecords:"Loading...",processing:"Processing..."},columnsDefs:[{searchable:!1,target:[0,1]},{orderable:!1,target:[0,1]}],order:[[1,"asc"]],processing:!0,serverSide:!0,ajax:{url:HomeUrl+"/stok/all",type:"POST",data:{_token:csrf_token}},columns:[{data:"cbox",orderable:!1},{data:"rnum",orderable:!1},{data:"barang"},{data:"qty"},{data:"tgl"}]}),$(".tfoot-seacrh").on("change",(function(e){var data_index=$(this).attr("data-index");table.columns(data_index).search($(this).val()).draw(),table.ajax.reload(null,!1)}))},handleDelete=function(){$(document).on("click",".btndel",(function(){let id=$(this).data("id");Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(result=>{result.isConfirmed&&$.ajax({type:"DELETE",url:HomeUrl+"/stok/"+id,data:{_token:csrf_token},success:function(response){Swal.fire("Deleted!","Your file has been deleted.","success"),table.ajax.reload()},error:function(response){Swal.fire({icon:"error",title:"Oops...",text:"Internal Server Error"})}})})}))};return{init:function(){handleDataStok(),handleDelete()}}}();$(document).ready((function(){Index.init()}));